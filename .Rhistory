reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput(outputId = "negplot"), plotOutput(outputId = "posplot"))
)
# plotOutput("negplot"),
# plotOutput("posplot")
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput("negplot"), plotOutput("posplot"))
)
# plotOutput("negplot"),
# plotOutput("posplot")
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput("negplot"), plotOutput("posplot"))
)
# plotOutput("negplot"),
# plotOutput("posplot")
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
setwd("~/Desktop/INFO_201/FinalProject-Goodreads")
library("jsonlite")
library("httr")
library("tidytext")
library("dplyr")
library("stringr")
library("rvest")
library("wordcloud")
library("reshape2")
source("./api-key.R")
ReviewWords <- function(book.isbn, book.title) {
base.url <- 'http://api.nytimes.com/svc/books/v3/reviews.json'
query.params <- list(isbn = book.isbn, title = book.title,  api_key = yogasaikey)
response <- GET(base.url, query = query.params)
body <- content(response, "text")
results <- fromJSON(body)
book.reviews <- flatten(results$results)
url <- book.reviews$url[1]
page <- read_html(url)
# Extract review text from webpage
review.content <- page %>% html_nodes('.story-body-text') %>% html_text()
# Create review text dataframe
dfcontent <- data.frame(review.content, stringsAsFactors = FALSE)
# Create tidytext structure of all words in review
all.words <- dfcontent %>% unnest_tokens(word, review.content)
# Get all word counts
word.count <- all.words %>%
group_by(word) %>%
summarize(count = n()) %>%
arrange(-count)
# Remove stop words
content.words <- word.count %>%
anti_join(stop_words, by="word")
# Get content word counts -- arrange content.words by descending count
content.count <- content.words %>%
arrange(-count)
return(content.count)
}
reviewdata <- ReviewWords("978-0375842207", "The Book Thief")
NegativeCloud <- function(reviewdata) {
# Get negative words in "nrc" Lexicon
nrc.neg <- get_sentiments("nrc") %>%
filter(sentiment == "negative")
# Count the negative words in the review data
neg.words <- reviewdata %>%
inner_join(nrc.neg, by ="word")
# Create the negative word cloud
ncloud <- wordcloud(neg.words$word, neg.words$count, scale = c(3,.5), min.freq = 1, max.words = Inf, random.order = TRUE, colors = "#C40500")
return(ncloud)
}
negative.cloud <- NegativeCloud(reviewdata)
# Get wordcloud with positive words in review
PositiveCloud <- function(reviewdata) {
# Get positive words in "nrc" Lexicon
nrc.pos <- get_sentiments("nrc") %>%
filter(sentiment == "positive")
# Count the positive words in the review data
pos.words <- content.count %>%
inner_join(nrc.pos, by ="word")
# Create the positive word cloud
pcloud <- wordcloud(pos.words$word, pos.words$count, scale = c(3,.5), min.freq = 1, max.words = Inf,
random.order = TRUE, colors = "#00BFC4")
return(pcloud)
}
positive.cloud <- PositiveCloud(reviewdata)
PositiveCloud <- function(reviewdata) {
# Get positive words in "nrc" Lexicon
nrc.pos <- get_sentiments("nrc") %>%
filter(sentiment == "positive")
# Count the positive words in the review data
pos.words <- reviewdata %>%
inner_join(nrc.pos, by ="word")
# Create the positive word cloud
pcloud <- wordcloud(pos.words$word, pos.words$count, scale = c(3,.5), min.freq = 1, max.words = Inf,
random.order = TRUE, colors = "#00BFC4")
return(pcloud)
}
positive.cloud <- PositiveCloud(reviewdata)
library(shiny)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("60%", "40%"), plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput(outputId = "negplot", width = "50%"), plotOutput(outputId = "posplot", width = "50%"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("50%", "50%"), plotOutput(outputId = "negplot", width = "100%"), plotOutput(outputId = "posplot", width = "100%"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("40%", "60%"), plotOutput(outputId = "negplot", width = "100%"), plotOutput(outputId = "posplot", width = "100%"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("60%", "40%"), plotOutput(outputId = "negplot", width = "100%"), plotOutput(outputId = "posplot", width = "100%"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = c("100%", "100%"), plotOutput(outputId = "negplot", width = "100%"), plotOutput(outputId = "posplot", width = "100%"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = 300, plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(cellWidths = 300, plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
par(mar=c(0,6,2,2)+0.1)
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
par(mar=c(0,6,2,2)+0.1)
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
server <- function(input, output) {
output$negplot <- renderPlot({
par(mar=c(0,6,2,2)+0.1)
reviewdata <- ReviewWords(input$isbn, input$title)
negative.cloud <- NegativeCloud(reviewdata)
})
output$posplot <- renderPlot({
par(mar=c(0,6,2,2)+0.1)
reviewdata <- ReviewWords(input$isbn, input$title)
positive.cloud <- PositiveCloud(reviewdata)
})
}
ui <- fluidPage(
headerPanel("Reviews"),
sidebarPanel(
textInput("title", label = h3("Title"), value = "The Book Thief"),
textInput("isbn", label = h3("ISBN"), value = "978-0375842207"),
hr(),
fluidRow(column(3, verbatimTextOutput("value")))
),
mainPanel(
fluidRow(
splitLayout(plotOutput("negplot"), plotOutput("posplot"))
)
)
)
shinyApp(ui = ui, server = server)
